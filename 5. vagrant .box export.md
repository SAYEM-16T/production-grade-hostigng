# 🟢 Vagrant Box Export & Import Guide (Production-Ready Go-Todo VM)

## **1️⃣ Exporting the Vagrant VM as a Box**

এই ধাপে আমরা VM কে এক `.box` ফাইল হিসেবে export করবো, যাতে অন্য machine-এ সহজে import করা যায়।

### **Step 1: Install dependencies on host machine**

Export করার জন্য host machine-এ **`virt-sysprep`** দরকার। এটি `libguestfs-tools` package এর মধ্যে আসে।

```bash
sudo apt update
sudo apt install -y libguestfs-tools
```

* নিশ্চিত হও যে host machine-এ **Vagrant** এবং **Vagrant-libvirt plugin** ইনস্টল আছে:

```bash
vagrant --version
vagrant plugin list
```

---

### **Step 2: Navigate to the Vagrant project folder**

```bash
cd ~/Desktop/prod-grade-host/docker-base
```

* এখানে `Vagrantfile` এবং `.vagrant` folder থাকতে হবে।

---

### **Step 3: Package the VM**

```bash
vagrant package --output go-todo-vm.box
```

* এটি VM কে `.box` ফাইল হিসেবে export করবে।
* যদি সব ঠিক থাকে, `.box` ফাইল তৈরি হয়ে যাবে:

```
~/Desktop/prod-grade-host/docker-base/go-todo-vm.box
```

> ⚠️ Tip: `.box` ফাইল বড় হতে পারে (RAM, disk usage অনুযায়ী 2-4GB+)

---

## **2️⃣ Transfer the Box to Another Machine**

* `.box` ফাইলটি **USB / Pandrive / Network Share** ব্যবহার করে অন্য laptop-এ copy করো।
* Example path: `/media/usb/go-todo-vm.box`

---

## **3️⃣ Importing the Box on Another Machine**

### **Step 1: Add the box to Vagrant**

```bash
vagrant box add go-todo-vm /path/to/go-todo-vm.box
```

* Example:

```bash
vagrant box add go-todo-vm /media/usb/go-todo-vm.box
```

* Successful হলে box registered হয়ে যাবে:

```
Successfully added box 'go-todo-vm' (v0) for 'libvirt'!
```

---

### **Step 2: Initialize a new Vagrant project**

```bash
mkdir ~/Desktop/go-todo-vm
cd ~/Desktop/go-todo-vm
vagrant init go-todo-vm
```

* এটি একটি নতুন `Vagrantfile` তৈরি করবে যা box কে reference করবে।

---

### **Step 3: Launch the VM**

```bash
vagrant up
```

* VM start হবে।
* Network, CPU, RAM configuration আগের Vagrantfile অনুযায়ী থাকবে।

---

### **Step 4: SSH into the VM**

```bash
vagrant ssh
```

* এখন তুমি VM-এর ভিতরে ঢুকতে পারবে।
* যেকোনো container বা project run করার জন্য আগের মতো commands ব্যবহার করতে পারো:

```bash
cd ~/go-todo-v1
docker-compose up -d --build
```

---

## **✅ Summary**

* `libguestfs-tools` install না থাকলে package fail করবে।
* `.box` ফাইল host থেকে export করে USB দিয়ে অন্য machine-এ import করা যায়।
* Import করার পর `vagrant init` + `vagrant up` দিয়ে VM ready।
* সকল container, network এবং Docker setup host-independent।

---

💡 **Pro Tip:**

* VM export করার আগে সব container stop করা ভালো:

```bash
docker-compose down
```

* `.box` ফাইল update করতে চাইলে পুনরায় package করতে হবে।

---

docker-compose down => docker halt => vagrant package --output go-todo-vm.box
